<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; script-src 'self' 'unsafe-inline'; img-src 'self' data:">
<title>SuperPlane</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500&display=swap');

  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg-deep: #0a0a0a;
    --bg-card: #171717;
    --border: #262626;
    --border-light: #333;
    --text-primary: #f5f5f5;
    --text-secondary: #a3a3a3;
    --text-dim: #666;
    --neon-glow: rgba(245,245,245,.6);
    --red-alert: #ef4444;
    --terminal-bg: #0e0e0e;
  }

  html, body {
    height: 100%;
    overflow: hidden;
    background: var(--bg-deep);
    font-family: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    color: var(--text-primary);
    -webkit-app-region: drag;
    user-select: none;
  }

  /* ── Background ── */
  .bg {
    position: fixed; inset: 0;
    background: var(--bg-deep);
    z-index: 0;
  }
  .bg::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 50% 40% at 50% 0%, rgba(255,255,255,.03) 0%, transparent 70%),
      radial-gradient(ellipse 60% 50% at 30% 100%, rgba(255,255,255,.015) 0%, transparent 60%);
  }
  .bg::after {
    content: '';
    position: absolute; inset: 0;
    background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.03'/%3E%3C/svg%3E");
    background-size: 256px 256px;
    opacity: .5;
  }

  /* ── Wrapper ── */
  .wrapper {
    position: relative; z-index: 1;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    height: 100%; padding: 32px;
  }

  /* ── Logo ── */
  .brand {
    margin-bottom: 40px;
    animation: fadeIn .8s ease-out both;
  }
  .brand svg {
    height: 28px;
    width: auto;
    filter: drop-shadow(0 0 20px var(--neon-glow)) drop-shadow(0 0 40px rgba(245,245,245,.2));
    animation: neonPulse 3s ease-in-out infinite;
  }
  @keyframes neonPulse {
    0%, 100% { filter: drop-shadow(0 0 12px rgba(245,245,245,.3)) drop-shadow(0 0 30px rgba(245,245,245,.1)); }
    50%      { filter: drop-shadow(0 0 20px rgba(245,245,245,.5)) drop-shadow(0 0 50px rgba(245,245,245,.2)); }
  }

  /* ── Card ── */
  .card {
    position: relative;
    width: 100%; max-width: 680px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 28px;
    box-shadow: 0 20px 60px rgba(0,0,0,.6);
    animation: fadeSlideIn .6s .15s ease-out both;
  }

  /* ── Status row ── */
  .status-row {
    display: flex; align-items: center; gap: 14px;
    margin-bottom: 22px;
  }

  /* ── Spinner ── */
  .spinner {
    width: 22px; height: 22px;
    flex-shrink: 0;
    position: relative;
  }
  .spinner svg {
    width: 100%; height: 100%;
    animation: spinRing 1.4s linear infinite;
  }
  .spinner .track { stroke: var(--border); }
  .spinner .arc { stroke: var(--text-primary); stroke-linecap: round; }
  @keyframes spinRing { to { transform: rotate(360deg); } }

  .spinner.error svg { animation: none; }
  .spinner.error .arc { stroke: var(--red-alert); stroke-dasharray: 76; stroke-dashoffset: 0; }
  .spinner.error .track { stroke: rgba(239,68,68,.2); }

  /* ── Status text ── */
  #status-text {
    font-size: 13px; font-weight: 400;
    color: var(--text-secondary);
    letter-spacing: .02em;
    line-height: 1.4;
  }
  #status-text.error {
    color: var(--red-alert);
  }

  /* ── Log area ── */
  .log-wrap {
    background: var(--terminal-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
  }
  .log-bar {
    display: flex; align-items: center; gap: 6px;
    padding: 10px 14px;
    border-bottom: 1px solid var(--border);
  }
  .log-bar .dot {
    width: 7px; height: 7px; border-radius: 50%;
  }
  .log-bar .dot:nth-child(1) { background: #ef444466; }
  .log-bar .dot:nth-child(2) { background: #eab30866; }
  .log-bar .dot:nth-child(3) { background: #22c55e66; }
  .log-bar .log-title {
    margin-left: 8px;
    font-size: 11px; font-weight: 400;
    color: var(--text-dim);
    letter-spacing: .04em;
    text-transform: lowercase;
  }

  #log-output {
    height: 210px;
    overflow-y: auto;
    padding: 14px 16px;
    font-size: 11.5px;
    line-height: 1.8;
    color: var(--text-dim);
    white-space: pre-wrap;
    word-break: break-all;
    -webkit-app-region: no-drag;
    user-select: text;
  }
  #log-output::-webkit-scrollbar { width: 4px; }
  #log-output::-webkit-scrollbar-track { background: transparent; }
  #log-output::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

  .log-line {
    opacity: 0;
    animation: logFade .2s ease-out forwards;
  }
  @keyframes logFade { to { opacity: 1; } }

  /* ── Retry button ── */
  .retry-wrap {
    display: none;
    margin-top: 20px;
    text-align: center;
    animation: fadeIn .3s ease-out both;
  }
  .retry-wrap.visible { display: block; }

  #retry-btn {
    -webkit-app-region: no-drag;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px; font-weight: 400;
    padding: 9px 24px;
    border: 1px solid var(--border-light);
    border-radius: 6px;
    background: transparent;
    color: var(--text-primary);
    cursor: pointer;
    letter-spacing: .04em;
    text-transform: lowercase;
    transition: all .15s;
  }
  #retry-btn:hover {
    background: rgba(255,255,255,.05);
    border-color: var(--text-dim);
    box-shadow: 0 0 15px rgba(255,255,255,.05);
  }
  #retry-btn:active { transform: scale(.97); }

  /* ── Close button ── */
  .close-btn {
    -webkit-app-region: no-drag;
    position: fixed;
    top: 14px; right: 16px;
    z-index: 10;
    width: 28px; height: 28px;
    border: none;
    background: transparent;
    color: var(--text-dim);
    font-size: 18px;
    line-height: 28px;
    text-align: center;
    cursor: pointer;
    border-radius: 6px;
    transition: all .15s;
  }
  .close-btn:hover {
    background: rgba(255,255,255,.08);
    color: var(--text-primary);
  }

  /* ── Util ── */
  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
  @keyframes fadeSlideIn {
    from { opacity: 0; transform: translateY(8px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>
  <button class="close-btn" id="close-btn" title="Quit">&times;</button>
  <div class="bg"></div>
  <div class="wrapper">
    <div class="brand">
      <svg fill="none" height="72" viewBox="0 0 475 72" width="475" xmlns="http://www.w3.org/2000/svg"><path d="m97.833 50.0195c-1.4209 1.438-2.908 2.8107-4.4541 4.1153l-34.4209-34.4209 18.4072 44.4394c-1.8402.8143-3.7241 1.5483-5.6474 2.1963l-18.2647-44.0957v47.501c-1.0038.0449-2.0134.0693-3.0283.0693l-.8613-.0058c-.7259-.0092-1.4489-.0313-2.169-.0635v-47.6572l-18.3213 44.2314c-1.9229-.6499-3.8067-1.385-5.6464-2.2012l18.375-44.3603-34.3516 34.3515c-1.54517-1.3048-3.03015-2.679-4.4502-4.1171l47.4082-47.40825zm118.352-33.3066c3.121.0001 5.813.7464 8.075 2.2392 2.307 1.4929 4.071 3.5742 5.293 6.2432 1.266 2.6691 1.899 5.7913 1.899 9.3652 0 3.619-.656 6.7858-1.968 9.5s-3.143 4.8177-5.496 6.3106c-2.352 1.4929-5.112 2.2393-8.279 2.2393-3.257-.0001-5.971-.7688-8.143-2.3067-1.401-1.0432-2.485-2.3532-3.257-3.9267v19.5341h-7.057v-48.5195h6.718v5.9102c.847-1.7721 2.159-3.2224 3.935-4.3497 2.353-1.4928 5.113-2.2392 8.28-2.2392zm106.294 0c3.122 0 5.814.7465 8.076 2.2392 2.307 1.4929 4.071 3.5742 5.293 6.2432 1.266 2.6691 1.9 5.7913 1.9 9.3652 0 3.619-.656 6.7858-1.968 9.5-1.312 2.7144-3.144 4.8177-5.497 6.3106-2.352 1.4928-5.112 2.2392-8.278 2.2393-3.257 0-5.972-.7686-8.144-2.3067-1.4-1.0428-2.484-2.3521-3.257-3.9248v19.5322h-7.057v-48.5195h6.718v5.9121c.847-1.7729 2.159-3.2239 3.936-4.3516 2.353-1.4927 5.112-2.2392 8.278-2.2392zm-186.978 0c4.026 0 7.261.9053 9.704 2.7148 2.488 1.8095 3.89 4.3427 4.207 7.5996h-6.515c-.271-1.6283-1.063-2.8719-2.375-3.7314-1.266-.9048-3.008-1.3574-5.225-1.3574-2.081 0-3.687.3844-4.818 1.1533-1.085.7238-1.628 1.7418-1.628 3.0537 0 1.0858.407 1.991 1.221 2.7149.86.7237 2.262 1.3344 4.207 1.832l5.7 1.4248c3.303.8143 5.791 2.1491 7.465 4.0039 1.674 1.8095 2.511 4.0035 2.511 6.582 0 3.1215-1.222 5.5648-3.665 7.3291-2.398 1.7641-5.768 2.6465-10.11 2.6465-4.524 0-8.121-.9958-10.79-2.9863s-4.184-4.7951-4.546-8.4141h6.513c.317 1.9905 1.222 3.5286 2.715 4.6143 1.538 1.0404 3.62 1.5605 6.243 1.5605 2.307 0 4.072-.4074 5.293-1.2217 1.222-.8142 1.832-1.9674 1.832-3.4599 0-1.0858-.362-1.991-1.086-2.7149-.678-.769-2.035-1.4027-4.071-1.9004l-5.564-1.289c-3.484-.8595-6.085-2.1261-7.804-3.7998-1.674-1.7191-2.511-3.8234-2.511-6.3115 0-3.1214 1.154-5.5639 3.461-7.3282 2.353-1.8095 5.565-2.7148 9.636-2.7148zm27.978 22.9365c0 2.3976.587 4.1851 1.763 5.3613 1.176 1.1763 2.851 1.7637 5.023 1.7637 1.945-.0001 3.664-.4517 5.157-1.3564 1.538-.9048 2.736-2.1493 3.596-3.7325.904-1.6286 1.357-3.5065 1.357-5.6328v-18.6611h6.989v34.6084h-6.718v-6.458c-1.112 1.9792-2.649 3.6127-4.614 4.8975-2.307 1.4928-4.953 2.2392-7.939 2.2392-2.307 0-4.343-.4748-6.108-1.4248-1.764-.9953-3.144-2.3532-4.139-4.0723-.95-1.719-1.425-3.6867-1.425-5.9033v-23.8867h7.058zm90.45-22.9365c3.347 0 6.242.7243 8.685 2.1719 2.488 1.4023 4.389 3.37 5.7 5.9033 1.358 2.5334 2.037 5.542 2.037 9.0254 0 .5427-.024 1.063-.069 1.5605 0 .4524-.045.9282-.136 1.4258h-26.564c.288 2.9134 1.18 5.2655 2.679 7.0566 1.9 2.2167 4.523 3.3252 7.871 3.3252 2.036 0 3.8-.4073 5.293-1.2216 1.493-.8595 2.601-2.103 3.325-3.7315h6.65c-1.131 3.257-3.053 5.8132-5.767 7.668-2.669 1.8548-5.882 2.7822-9.637 2.7822-3.483 0-6.559-.7695-9.228-2.3076-2.624-1.5381-4.682-3.6646-6.175-6.3789-1.493-2.7144-2.239-5.8356-2.239-9.3643 0-3.5738.723-6.6952 2.17-9.3642 1.493-2.7144 3.574-4.8187 6.244-6.3116 2.669-1.4928 5.723-2.2392 9.161-2.2392zm122.11 0c4.524 0 7.917 1.0633 10.179 3.1894 2.262 2.0811 3.393 5.158 3.393 9.2295v16.2178c0 1.0405.068 2.1037.203 3.1895.136 1.0857.34 2.2394.612 3.4609h-6.855c-.226-.8595-.384-1.8101-.474-2.8506-.033-.7544-.054-1.6278-.063-2.6201-.854 1.7714-2.122 3.1879-3.805 4.249-2.081 1.2667-4.615 1.9004-7.601 1.9004-3.529-.0001-6.333-.8601-8.414-2.5791-2.081-1.7643-3.121-4.1392-3.121-7.125 0-3.0762 1.085-5.4964 3.257-7.2607 2.216-1.8096 5.383-3.0317 9.5-3.6651l9.839-1.582v-1.6064c0-2.2167-.565-3.8684-1.696-4.9542-1.086-1.1309-2.828-1.6962-5.225-1.6962-2.308 0-4.162.4526-5.565 1.3574-1.357.9047-2.149 2.1936-2.375 3.8672h-6.718c.317-3.2571 1.788-5.8585 4.411-7.8037 2.624-1.9451 6.13-2.918 10.518-2.918zm79.148 0c3.347 0 6.242.7243 8.685 2.1719 2.488 1.4023 4.388 3.37 5.7 5.9033 1.357 2.5334 2.036 5.542 2.036 9.0254 0 .5427-.023 1.063-.068 1.5605 0 .4524-.045.9282-.136 1.4258h-26.564c.288 2.9134 1.18 5.2655 2.679 7.0566 1.9 2.2167 4.523 3.3252 7.871 3.3252 2.035 0 3.8-.4074 5.293-1.2216 1.492-.8595 2.601-2.1031 3.325-3.7315h6.65c-1.131 3.257-3.053 5.8132-5.767 7.668-2.67 1.8548-5.882 2.7822-9.637 2.7822-3.483 0-6.56-.7695-9.229-2.3076-2.623-1.5381-4.682-3.6646-6.174-6.3789-1.493-2.7144-2.24-5.8356-2.24-9.3643 0-3.5738.724-6.6952 2.171-9.3642 1.493-2.7144 3.574-4.8187 6.243-6.3116 2.669-1.4928 5.723-2.2392 9.162-2.2392zm-160.11 0c1.04 0 1.764.0907 2.171.2715v6.6504c-.226-.0904-.542-.1357-.949-.1358-.407-.0452-.905-.0674-1.493-.0674-3.393 0-5.949.8822-7.668 2.6465-1.674 1.7643-2.511 4.3878-2.511 7.8711v18.0508h-7.058v-34.6084h6.718v6.7109c.84-2.1489 2.062-3.843 3.665-5.082 1.991-1.5381 4.366-2.3076 7.125-2.3076zm57.144 35.2871h-7.057v-48.8584h7.057zm66.562-35.2871c3.71 0 6.628 1.0411 8.754 3.1221 2.126 2.0809 3.19 4.8402 3.19 8.2783v23.8867h-6.99v-22.2578c0-2.3977-.61-4.1851-1.832-5.3613-1.176-1.1762-2.94-1.7637-5.293-1.7637-2.035 0-3.845.4518-5.428 1.3564-1.538.9047-2.76 2.1493-3.664 3.7325-.86 1.5833-1.291 3.4613-1.291 5.6328v18.6611h-7.056v-34.6084h6.718v6.5625c1.117-2.0612 2.676-3.7295 4.681-5.002 2.353-1.4928 5.09-2.2391 8.211-2.2392zm-44.847 20.0869c-2.308.3619-4.05.9725-5.226 1.832-1.131.8596-1.696 2.104-1.696 3.7325 0 1.5829.52 2.7814 1.56 3.5957 1.086.769 2.647 1.1542 4.683 1.1543 2.714 0 4.953-.6561 6.718-1.9678 1.809-1.312 2.714-2.9636 2.714-4.9541v-4.7754zm-159.788-14.1826c-3.076 0-5.541 1.0854-7.396 3.2568-1.81 2.1263-2.715 5.0896-2.715 8.8897 0 3.7095.905 6.6498 2.715 8.8213 1.855 2.1261 4.342 3.1893 7.464 3.1894 3.076 0 5.519-1.0854 7.329-3.2568 1.809-2.1714 2.715-5.1572 2.715-8.9571 0-3.7547-.906-6.6729-2.715-8.7539-1.81-2.1262-4.275-3.1894-7.397-3.1894zm106.295 0c-3.076.0001-5.541 1.0854-7.396 3.2568-1.81 2.1263-2.714 5.0896-2.714 8.8897 0 3.7094.905 6.6498 2.714 8.8213 1.855 2.1262 4.343 3.1894 7.465 3.1894 3.076 0 5.519-1.0853 7.329-3.2568 1.809-2.1714 2.714-5.1572 2.714-8.9571 0-3.7546-.905-6.6729-2.714-8.7539-1.81-2.1262-4.276-3.1894-7.398-3.1894zm-66.514-.4072c-3.212 0-5.768 1.1084-7.668 3.3252-1.326 1.5516-2.175 3.5423-2.553 5.9716h19.621c-.266-2.6932-1.069-4.8194-2.411-6.3789-1.674-1.9452-4.004-2.9179-6.989-2.9179zm201.258 0c-3.212 0-5.768 1.1084-7.668 3.3252-1.326 1.5516-2.175 3.5423-2.553 5.9716h19.621c-.266-2.6932-1.069-4.8194-2.411-6.3789-1.674-1.9452-4.004-2.9179-6.989-2.9179z" fill="#f5f5f5"/></svg>
    </div>

    <div class="card">
      <div class="status-row">
        <div class="spinner" id="spinner">
          <svg viewBox="0 0 28 28" fill="none">
            <circle class="track" cx="14" cy="14" r="12" stroke-width="2" fill="none"/>
            <circle class="arc" cx="14" cy="14" r="12" stroke-width="2" fill="none"
                    stroke-dasharray="76" stroke-dashoffset="56"/>
          </svg>
        </div>
        <div id="status-text">initializing…</div>
      </div>

      <div class="log-wrap">
        <div class="log-bar">
          <div class="dot"></div><div class="dot"></div><div class="dot"></div>
          <span class="log-title">output</span>
        </div>
        <div id="log-output"></div>
      </div>

      <div class="retry-wrap" id="retry-wrap">
        <button id="retry-btn">retry</button>
      </div>
    </div>
  </div>

<script>
  const statusEl  = document.getElementById('status-text');
  const logEl     = document.getElementById('log-output');
  const spinnerEl = document.getElementById('spinner');
  const retryWrap = document.getElementById('retry-wrap');
  const retryBtn  = document.getElementById('retry-btn');
  const closeBtn  = document.getElementById('close-btn');

  let cleanupStatus, cleanupLog, cleanupError;

  function appendLog(text) {
    const line = document.createElement('div');
    line.className = 'log-line';
    line.textContent = text;
    logEl.appendChild(line);
    logEl.scrollTop = logEl.scrollHeight;
  }

  function setStatus(text) {
    statusEl.textContent = text;
    statusEl.classList.remove('error');
    spinnerEl.classList.remove('error');
    retryWrap.classList.remove('visible');
  }

  function setError(text) {
    statusEl.textContent = text;
    statusEl.classList.add('error');
    spinnerEl.classList.add('error');
    retryWrap.classList.add('visible');
  }

  function bindListeners() {
    if (!window.electronAPI) return;
    cleanupStatus = window.electronAPI.onStatusUpdate((text) => setStatus(text));
    cleanupLog    = window.electronAPI.onLogLine((text) => appendLog(text));
    cleanupError  = window.electronAPI.onError((text) => setError(text));
  }

  function unbindListeners() {
    if (cleanupStatus) cleanupStatus();
    if (cleanupLog)    cleanupLog();
    if (cleanupError)  cleanupError();
  }

  bindListeners();

  retryBtn.addEventListener('click', () => {
    unbindListeners();
    if (window.electronAPI) {
      window.electronAPI.retry();
    }
    setStatus('retrying…');
    retryWrap.classList.remove('visible');
    bindListeners();
  });

  closeBtn.addEventListener('click', () => {
    if (window.electronAPI) {
      window.electronAPI.quit();
    }
  });
</script>
</body>
</html>
